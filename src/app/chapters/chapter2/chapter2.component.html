<div class="min-h-screen bg-gradient-to-br from-purple-50 to-blue-100">
  <!-- Header -->
  <header class="bg-white shadow-lg border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center py-4">
        <div class="flex items-center">
          <button
            (click)="backToDashboard()"
            class="mr-4 p-2 text-gray-600 hover:text-gray-900 transition-colors"
          >
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
          </button>
          <div>
            <h1 class="text-2xl font-bold text-gray-900">üî¢ Chapter 2: Number Theory</h1>
            <p class="text-sm text-gray-600">Number Theory Fundamentals</p>
          </div>
        </div>
        <div class="text-sm text-gray-600">
          Section {{ currentSection }} of {{ totalSections }}
        </div>
      </div>
    </div>
  </header>

  <!-- Progress Bar -->
  <div class="bg-white border-b">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="py-2">
        <div class="w-full bg-gray-200 rounded-full h-2">
          <div
            class="bg-purple-600 h-2 rounded-full transition-all duration-300"
            [style.width.%]="(currentSection / totalSections) * 100"
          ></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <main class="max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
    <div class="bg-white rounded-xl shadow-lg overflow-hidden">

      <!-- Section 1: Number Theory Introduction -->
      <div *ngIf="currentSection === 1" class="p-8">
        <h2 class="text-3xl font-bold text-gray-900 mb-6">Number Theory</h2>
        <div class="bg-purple-50 border-l-4 border-purple-400 p-6 mb-6">
          <p class="text-gray-700 text-lg leading-relaxed">
            Number Theory is the study of the properties and relationships of integers. In cryptography, many algorithms‚Äîlike RSA‚Äîlean heavily on the difficulty of solving certain number-theoretic problems (e.g., factoring large composites or finding discrete logarithms).
          </p>
        </div>
        <div class="bg-blue-50 rounded-lg p-6">
          <h3 class="text-xl font-semibold text-gray-900 mb-3">Why Number Theory Matters in Cryptography</h3>
          <ul class="space-y-2 text-gray-700">
            <li class="flex items-start">
              <span class="text-blue-600 mr-2">‚Ä¢</span>
              <span>RSA encryption relies on the difficulty of factoring large numbers</span>
            </li>
            <li class="flex items-start">
              <span class="text-blue-600 mr-2">‚Ä¢</span>
              <span>Discrete logarithm problems form the basis of many cryptographic protocols</span>
            </li>
            <li class="flex items-start">
              <span class="text-blue-600 mr-2">‚Ä¢</span>
              <span>Understanding divisibility and primes helps build secure encryption schemes</span>
            </li>
          </ul>
        </div>
      </div>

      <!-- Section 2: Modular Arithmetic -->
      <div *ngIf="currentSection === 2" class="p-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-6">Modular Arithmetic</h2>
        <p class="text-gray-700 mb-6">
          Modular arithmetic‚Äîoften called "clock arithmetic"‚Äîrestricts calculations to a finite set of residues.
          This makes operations predictable and bounds intermediate values, preventing overflow in computer implementations.
        </p>

        <div class="bg-gray-50 rounded-lg p-6 mb-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-3">Definition</h3>
          <div class="bg-gray-900 text-green-400 p-4 rounded font-mono text-center text-lg">
            a ‚â° b (mod n)
          </div>
          <p class="text-gray-700 mt-3">
            if and only if <code class="bg-gray-200 px-2 py-1 rounded">a mod n = b mod n</code>
          </p>
          <p class="text-gray-600 text-sm mt-2">
            Here, n > 0 is the modulus, and b is called a residue of a modulo n.
          </p>
        </div>

        <div class="bg-blue-50 rounded-lg p-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-3">Clock Example</h3>
          <p class="text-gray-700 mb-2">14 hours after 3 PM is 5 AM:</p>
          <div class="bg-white p-3 rounded border font-mono text-center">
            14 + 3 ‚â° 5 (mod 12)
          </div>
          <p class="text-gray-600 text-sm mt-3">
            In general: a + k¬∑n ‚â° a (mod n) for any integer k
          </p>
        </div>
      </div>

      <!-- Section 3: Fundamental Laws -->
      <div *ngIf="currentSection === 3" class="p-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-6">Associativity, Commutativity & Distributivity</h2>

        <div class="grid md:grid-cols-1 gap-6">
          <div class="bg-green-50 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-3">üîÑ Associativity</h3>
            <div class="bg-white p-3 rounded border font-mono text-sm">
              ((a + b) mod n) + c ‚â° a + ((b + c) mod n) (mod n)
            </div>
          </div>

          <div class="bg-blue-50 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-3">‚ÜîÔ∏è Commutativity</h3>
            <div class="bg-white p-3 rounded border font-mono text-sm">
              (a + b) mod n = (b + a) mod n
            </div>
          </div>

          <div class="bg-purple-50 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-3">üìä Distributivity</h3>
            <div class="bg-white p-3 rounded border font-mono text-sm">
              (a + b) √ó c mod n = (a √ó c + b √ó c) mod n
            </div>
          </div>
        </div>

        <div class="mt-6 bg-yellow-50 border-l-4 border-yellow-400 p-4">
          <p class="text-gray-700">
            <strong>Key Insight:</strong> These laws let us reorder and group modular operations to simplify complex expressions‚Äîcrucial when computing with very large keys or repeated exponentiation.
          </p>
        </div>
      </div>

      <!-- Section 4: Residues & Complete Sets -->
      <div *ngIf="currentSection === 4" class="p-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-6">Residues of Modulo n</h2>

        <div class="space-y-6">
          <div class="bg-gray-50 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-3">Complete Set of Residues</h3>
            <p class="text-gray-700 mb-3">
              For modulus n, the set {{'{'}}0, 1, ‚Ä¶, n‚àí1{{'}'}} contains exactly one representative of each equivalence class modulo n.
            </p>
            <div class="bg-white p-3 rounded border">
              <strong>Example for n = 7:</strong> {{'{'}}0, 1, 2, 3, 4, 5, 6{{'}'}}
            </div>
          </div>

          <div class="bg-blue-50 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-3">Negative Residues</h3>
            <p class="text-gray-700 mb-3">Example: ‚àí5 ‚â° 2 (mod 7) since ‚àí5 + 7 = 2</p>
          </div>

          <div class="bg-green-50 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-3">Worked Example</h3>
            <div *ngFor="let example of modularExamples; let i = index" class="mb-4">
              <p class="font-semibold text-gray-900 mb-2">{{ example.problem }}</p>
              <div class="flex gap-4 items-center mb-2">
                <input
                  type="text"
                  [(ngModel)]="example.userAnswer"
                  class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                  placeholder="Your answer"
                >
                <button
                  (click)="checkAnswer(example)"
                  class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors"
                >
                  Check
                </button>
              </div>
              <div *ngIf="example.showSolution" class="bg-white rounded-lg p-4 border">
                <p class="font-semibold mb-2">Solution: {{ example.solution }}</p>
                <div class="text-sm text-gray-600">
                  <p *ngFor="let step of example.steps" class="mb-1">{{ step }}</p>
                </div>
                <div
                  class="mt-2 px-3 py-2 rounded text-sm"
                  [class.bg-green-100]="example.userAnswer === example.solution"
                  [class.text-green-800]="example.userAnswer === example.solution"
                  [class.bg-red-100]="example.userAnswer !== example.solution"
                  [class.text-red-800]="example.userAnswer !== example.solution"
                >
                  {{ example.userAnswer === example.solution ? 'Correct!' : 'Try again!' }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Section 5: Modular Exponentiation -->
      <div *ngIf="currentSection === 5" class="p-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-6">Efficient Powering Modulo n</h2>

        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-6 mb-6">
          <p class="text-gray-700">
            Directly computing a^k and then reducing mod n is impractical for large k. Instead, we use the "square-and-multiply" method, keeping intermediate values in [0, n‚àí1].
          </p>
        </div>

        <div class="bg-white border rounded-lg p-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-4">Step-by-Step: 3^12 mod 7</h3>
          <div class="space-y-3">
            <div class="flex items-center justify-between bg-gray-50 p-3 rounded">
              <span class="font-mono">3¬≤ mod 7</span>
              <span>=</span>
              <span class="font-mono">9 mod 7 = 2</span>
            </div>
            <div class="flex items-center justify-between bg-gray-50 p-3 rounded">
              <span class="font-mono">3‚Å¥ mod 7</span>
              <span>=</span>
              <span class="font-mono">2¬≤ mod 7 = 4</span>
            </div>
            <div class="flex items-center justify-between bg-gray-50 p-3 rounded">
              <span class="font-mono">3‚Å∏ mod 7</span>
              <span>=</span>
              <span class="font-mono">4¬≤ mod 7 = 2</span>
            </div>
            <div class="flex items-center justify-between bg-blue-100 p-3 rounded border-2 border-blue-300">
              <span class="font-mono">3¬π¬≤ mod 7</span>
              <span>=</span>
              <span class="font-mono">3‚Å∏ √ó 3‚Å¥ = 2 √ó 4 = 8 mod 7 = 1</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Section 6: Greatest Common Divisor -->
      <div *ngIf="currentSection === 6" class="p-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-6">The gcd Function</h2>

        <div class="bg-gray-50 rounded-lg p-6 mb-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-3">Definition</h3>
          <p class="text-gray-700 mb-3">
            The greatest common divisor of a, b ‚àà Z‚Å∫ is the largest integer d dividing both. We write gcd(a,b) = d.
          </p>
          <div class="bg-blue-100 border-l-4 border-blue-400 p-4">
            <p class="text-gray-700">
              <strong>Key Property:</strong> If gcd(a,n) = 1, then a and n are relatively prime‚Äîa key condition for the existence of multiplicative inverses.
            </p>
          </div>
        </div>

        <div class="grid md:grid-cols-2 gap-6">
          <div class="bg-green-50 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-3">Quick Examples</h3>
            <div class="space-y-2 font-mono">
              <div>gcd(8, 9) = 1</div>
              <div>gcd(48, 72) = 24</div>
            </div>
          </div>

          <div class="bg-purple-50 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-3">Interactive Calculator</h3>
            <div class="space-y-3">
              <div class="flex flex-col sm:flex-row gap-2">
                <input
                  type="text"
                  [(ngModel)]="gcdCalcA"
                  placeholder="a"
                  pattern="^[1-9][0-9]*$"
                  class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                  title="Please enter a positive integer"
                >
                <input
                  type="text"
                  [(ngModel)]="gcdCalcB"
                  placeholder="b"
                  pattern="^[1-9][0-9]*$"
                  class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                  title="Please enter a positive integer"
                >
              </div>
              <button
                (click)="calculateGCD()"
                class="w-full bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 transition-colors"
              >
                Calculate GCD
              </button>
              <div *ngIf="gcdCalcResult" 
                   [class.bg-red-50]="gcdCalcResult.includes('Invalid') || gcdCalcResult.includes('must')"
                   [class.text-red-800]="gcdCalcResult.includes('Invalid') || gcdCalcResult.includes('must')"
                   class="bg-white p-3 rounded border font-mono text-center">
                {{ gcdCalcResult }}
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Section 7: Euclid's Algorithm -->
      <div *ngIf="currentSection === 7" class="p-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-6">Computing gcd by Repeated Division</h2>

        <div class="bg-blue-50 rounded-lg p-6 mb-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-3">Algorithm Steps</h3>
          <ol class="list-decimal list-inside space-y-2 text-gray-700">
            <li>Given (a,b) with a < b, compute r = a mod b</li>
            <li>Replace (a,b) ‚Üê (b,r) and repeat until r = 0</li>
            <li>The last non-zero remainder is gcd(a,b)</li>
          </ol>
        </div>

        <div class="bg-white border rounded-lg p-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-4">Worked Example: gcd(36, 123)</h3>
          <div class="space-y-2">
            <div *ngFor="let step of gcdExample.steps"
                 class="flex items-center justify-between bg-gray-50 p-3 rounded font-mono text-sm">
              <span>{{ step.equation }}</span>
              <span *ngIf="step.remainder === 0" class="text-green-600 font-bold">‚áí gcd = {{ gcdExample.result }}</span>
            </div>
          </div>
        </div>

        <!-- Interactive GCD Calculator Results -->
        <div *ngIf="gcdCalcSteps.length > 0" class="mt-6 bg-green-50 rounded-lg p-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-4">Your Calculation Steps</h3>
          <div class="space-y-2">
            <div *ngFor="let step of gcdCalcSteps"
                 class="flex items-center justify-between bg-white p-3 rounded font-mono text-sm">
              <span>{{ step.equation }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Section 8: Multiplicative Inverses -->
      <div *ngIf="currentSection === 8" class="p-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-6">Finding a‚Åª¬π Modulo n</h2>

        <div class="bg-gray-50 rounded-lg p-6 mb-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-3">Definition</h3>
          <p class="text-gray-700 mb-3">
            An integer x is the multiplicative inverse of a mod n if:
          </p>
          <div class="bg-gray-900 text-green-400 p-4 rounded font-mono text-center text-lg">
            a ¬∑ x ‚â° 1 (mod n)
          </div>
        </div>

        <div class="bg-blue-50 border-l-4 border-blue-400 p-6 mb-6">
          <p class="text-gray-700">
            <strong>Cryptographic Importance:</strong> In cryptosystems like RSA, private keys are inverses of public-exponent operations. Efficiently computing inverses underlies key generation.
          </p>
        </div>

        <div class="bg-green-50 rounded-lg p-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-3">Simple Check Example</h3>
          <p class="text-gray-700 mb-3">To invert 3 mod 10, try x = 1, 2, ‚Ä¶, 9 until 3x mod 10 = 1</p>
          <div class="bg-white p-4 rounded border">
            <p class="font-mono">x = 7 since 3 ¬∑ 7 = 21 ‚â° 1 (mod 10)</p>
          </div>
        </div>
      </div>

      <!-- Section 9: Extended Euclidean Algorithm -->
      <div *ngIf="currentSection === 9" class="p-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-6">Simultaneously gcd and Inverse</h2>

        <div class="bg-purple-50 rounded-lg p-6 mb-6">
          <p class="text-gray-700 mb-3">
            The Extended Euclidean Algorithm augments the standard method to produce integers (s,t) satisfying:
          </p>
          <div class="bg-gray-900 text-green-400 p-4 rounded font-mono text-center text-lg">
            s¬∑a + t¬∑n = gcd(a,n)
          </div>
          <p class="text-gray-700 mt-3">
            When gcd(a,n) = 1, t (or s) yields the inverse of a mod n.
          </p>
        </div>

        <div class="bg-yellow-50 rounded-lg p-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-3">Algorithm Outline</h3>
          <ol class="list-decimal list-inside space-y-2 text-gray-700">
            <li>Run the Euclid steps, tracking coefficients s·µ¢, t·µ¢</li>
            <li>At termination, retrieve the coefficient corresponding to a (or n)</li>
          </ol>

          <div class="mt-4 bg-white p-4 rounded border">
            <h4 class="font-semibold text-gray-900 mb-2">Example Sketch</h4>
            <p class="text-gray-700 text-sm">
              To invert 17 mod 19800, Extended Euclid finds integers (s,t) with:<br>
              <span class="font-mono">17¬∑t + 19800¬∑s = 1</span><br>
              so <span class="font-mono">t mod 19800</span> is <span class="font-mono">17‚Åª¬π</span>
            </p>
          </div>
        </div>
      </div>

      <!-- Section 10: Euler's Totient Function -->
      <div *ngIf="currentSection === 10" class="p-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-6">Euler's œÜ(n) Function</h2>

        <div class="bg-gray-50 rounded-lg p-6 mb-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-3">Definition</h3>
          <p class="text-gray-700 mb-3">
            œÜ(n) is the number of integers in {{'{'}}1, 2, ‚Ä¶, n‚àí1{{ '}'  }}that are relatively prime to n.
            This equals the size of the reduced residue system modulo n.
          </p>
        </div>

        <div class="bg-blue-50 border-l-4 border-blue-400 p-6 mb-6">
          <p class="text-gray-700">
            <strong>RSA Connection:</strong> œÜ(n) governs the cycle length of exponentiation in Z*‚Çô.
            In RSA, we choose moduli n = pq so that œÜ(n) = (p‚àí1)(q‚àí1).
          </p>
        </div>

        <div class="bg-white border rounded-lg p-6 mb-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-3">Computation Rule</h3>
          <p class="text-gray-700 mb-3">If n = ‚àè·µ¢ p·µ¢·µâ‚Å±, then:</p>
          <div class="bg-gray-900 text-green-400 p-4 rounded font-mono text-center">
            œÜ(n) = ‚àè·µ¢ p·µ¢·µâ‚Å±‚Åª¬π(p·µ¢ ‚àí 1)
          </div>
        </div>

        <div class="grid md:grid-cols-3 gap-4">
          <div *ngFor="let example of totientExamples" class="bg-green-50 rounded-lg p-4">
            <h4 class="font-semibold text-gray-900 mb-2">œÜ({{ example.n }})</h4>
            <p class="text-sm text-gray-600 mb-1">{{ example.factorization }}</p>
            <p class="text-sm text-gray-700 mb-2">{{ example.calculation }}</p>
            <div class="bg-white p-2 rounded border text-center font-mono">
              = {{ example.result }}
            </div>
          </div>
        </div>
      </div>

      <!-- Section 11: Fermat's & Euler's Theorems -->
      <div *ngIf="currentSection === 11" class="p-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-6">Fermat's & Euler's Theorems</h2>

        <div class="grid md:grid-cols-2 gap-6 mb-6">
          <div class="bg-red-50 rounded-lg p-6">
            <h3 class="text-xl font-semibold text-gray-900 mb-4">Fermat's Little Theorem</h3>
            <p class="text-gray-700 mb-3">If p is prime and gcd(a,p) = 1, then:</p>
            <div class="bg-gray-900 text-green-400 p-3 rounded font-mono text-center">
              a·µñ‚Åª¬π ‚â° 1 (mod p)
            </div>
            <div class="mt-3 bg-white p-3 rounded border">
              <strong>Example:</strong> 6¬π‚Å∞ mod 11 = 1
            </div>
          </div>

          <div class="bg-blue-50 rounded-lg p-6">
            <h3 class="text-xl font-semibold text-gray-900 mb-4">Euler's Theorem</h3>
            <p class="text-gray-700 mb-3">For any n with gcd(a,n) = 1:</p>
            <div class="bg-gray-900 text-green-400 p-3 rounded font-mono text-center">
              a·∂†‚ÅΩ‚Åø‚Åæ ‚â° 1 (mod n)
            </div>
          </div>
        </div>

        <div class="bg-purple-50 border-l-4 border-purple-400 p-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-3">RSA Connection</h3>
          <p class="text-gray-700">
            Euler's Theorem generalizes Fermat's result to composite moduli, and underpins the correctness of RSA decryption:
            raising to the private exponent (which is œÜ(n)-related) reverses the public exponentiation.
          </p>
        </div>
      </div>

      <!-- Section 12: Summary -->
      <div *ngIf="currentSection === 12" class="p-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-6">Summary & Further Reading</h2>

        <div class="bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-8 mb-6">
          <h3 class="text-xl font-semibold text-gray-900 mb-4">Key Takeaways</h3>
          <ul class="space-y-3 text-gray-700">
            <li class="flex items-start">
              <span class="text-purple-600 mr-2">‚Ä¢</span>
              <span>Modular arithmetic keeps computations bounded</span>
            </li>
            <li class="flex items-start">
              <span class="text-purple-600 mr-2">‚Ä¢</span>
              <span>Euclid's methods give fast tools for gcd and inverses</span>
            </li>
            <li class="flex items-start">
              <span class="text-purple-600 mr-2">‚Ä¢</span>
              <span>œÜ(n) and exponentiation theorems form the mathematical backbone of public-key cryptography</span>
            </li>
          </ul>
        </div>

        <div class="grid md:grid-cols-2 gap-6">
          <div class="bg-green-50 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-3">üöÄ Next Steps</h3>
            <ul class="space-y-2 text-gray-700 text-sm">
              <li>‚Ä¢ Apply these concepts in building a small RSA toy</li>
              <li>‚Ä¢ Generate primes, compute œÜ(n)</li>
              <li>‚Ä¢ Choose e, d, and test encryption/decryption</li>
            </ul>
          </div>

          <div class="bg-blue-50 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-3">üîç Explore Further</h3>
            <ul class="space-y-2 text-gray-700 text-sm">
              <li>‚Ä¢ Discrete logarithms as the basis for Diffie‚ÄìHellman</li>
              <li>‚Ä¢ Advanced number theory in elliptic curve cryptography</li>
              <li>‚Ä¢ Primality testing algorithms</li>
            </ul>
          </div>
        </div>

        <!-- Interactive Modular Calculator -->
        <div class="mt-8 bg-yellow-50 rounded-lg p-6">
          <h3 class="text-lg font-semibold text-gray-900 mb-4">üßÆ Interactive Modular Calculator</h3>
          <div class="flex flex-col sm:grid sm:grid-cols-4 gap-4 mb-4">
            <input
              type="text"
              [(ngModel)]="modCalcA"
              placeholder="a"
              pattern="^-?[0-9]+$"
              class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"
              title="Please enter a valid integer"
            >
            <select
              [(ngModel)]="modCalcOperation"
              class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"
            >
              <option value="add">+</option>
              <option value="subtract">‚àí</option>
              <option value="multiply">√ó</option>
            </select>
            <input
              type="text"
              [(ngModel)]="modCalcB"
              placeholder="b"
              pattern="^-?[0-9]+$"
              class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"
              title="Please enter a valid integer"
            >
            <div class="flex items-center">
              <span class="mr-2">mod</span>
              <input
                type="text"
                [(ngModel)]="modCalcN"
                placeholder="n"
                pattern="^[1-9][0-9]*$"
                class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"
                title="Please enter a positive integer"
              >
            </div>
          </div>
          <div class="flex gap-4 items-center">
            <button
              (click)="calculateModular()"
              class="bg-yellow-600 text-white px-6 py-2 rounded-md hover:bg-yellow-700 transition-colors"
            >
              Calculate
            </button>
            <div *ngIf="modCalcResult" 
                 [class.bg-red-50]="modCalcResult.includes('Invalid') || modCalcResult.includes('must')"
                 [class.text-red-800]="modCalcResult.includes('Invalid') || modCalcResult.includes('must')"
                 class="px-4 py-2 rounded border font-mono">
              Result: {{ modCalcResult }}
            </div>
          </div>
        </div>
      </div>

      <!-- Navigation -->
      <div class="bg-gray-50 px-4 py-4 flex flex-col sm:flex-row sm:justify-between items-center space-y-4 sm:space-y-0">
        <button
          (click)="previousSection()"
          [disabled]="currentSection === 1"
          class="flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
          Previous
        </button>

        <div class="flex flex-wrap justify-center space-x-2 overflow-x-auto max-w-full">
          <button
            *ngFor="let section of [].constructor(totalSections); let i = index"
            (click)="goToSection(i + 1)"
            class="w-8 h-8 rounded-full text-sm font-medium transition-colors"
            [class.bg-purple-600]="currentSection === i + 1"
            [class.text-white]="currentSection === i + 1"
            [class.bg-gray-200]="currentSection !== i + 1"
            [class.text-gray-700]="currentSection !== i + 1"
            [class.hover:bg-gray-300]="currentSection !== i + 1"
          >
            {{ i + 1 }}
          </button>
        </div>

        <button
          (click)="nextSection()"
          [disabled]="currentSection === totalSections"
          class="flex items-center px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          Next
          <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </button>
      </div>
    </div>
  </main>
</div>
